@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Dark theme color palette - Unified dark UI */

    /* Backgrounds - Dark base colors */
    --bg-primary: 13 17 23; /* #0d1117 - GitHub dark background */
    --bg-secondary: 22 27 34; /* #161b22 - Slightly elevated */
    --bg-tertiary: 33 38 45; /* #21262d - Interactive elements */
    --bg-elevated: 48 54 61; /* #30363d - Elevated surfaces */
    --bg-hover: 56 62 71; /* Hover state */

    /* Foreground - Text colors for dark theme */
    --fg-primary: 230 237 243; /* #e6edf3 - Primary text (high contrast) */
    --fg-secondary: 139 148 158; /* #8b949e - Secondary text */
    --fg-tertiary: 110 118 129; /* #6e7681 - Tertiary text */
    --fg-muted: 72 79 88; /* #484f58 - Muted text */

    /* Accent colors - Vibrant on dark */
    --accent-primary: 193 95 60; /* #C15F3C - Crail (primary accent) */
    --accent-secondary: 214 123 89; /* Lighter warm orange */
    --accent-success: 63 185 80; /* #3fb950 - GitHub green */
    --accent-warning: 210 145 34; /* #d29922 - GitHub amber */
    --accent-error: 248 81 73; /* #f85149 - GitHub red */
    --accent-info: 88 166 255; /* #58a6ff - GitHub blue */

    /* Borders - Subtle on dark */
    --border-primary: 48 54 61; /* #30363d - Primary border */
    --border-secondary: 56 62 71; /* #383e47 - Secondary border */
    --border-focus: 88 166 255; /* #58a6ff - Focus highlight */

    /* Overlays */
    --overlay: 0 0 0 / 0.6;
    --glass-bg: 22 27 34 / 0.85;
    --glass-border: 88 166 255 / 0.15;

    /* Shadows - Deeper for dark theme */
    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.3);
    --shadow-md: 0 2px 6px 0 rgb(0 0 0 / 0.4);
    --shadow-lg: 0 4px 12px 0 rgb(0 0 0 / 0.5);
    --shadow-xl: 0 8px 24px 0 rgb(0 0 0 / 0.6);
    --shadow-glow: 0 0 16px rgb(88 166 255 / 0.25);
  }

  * {
    @apply border-border;
  }

  body {
    @apply bg-bg-primary;
    @apply text-fg-primary;
    @apply font-sans text-sm leading-relaxed antialiased;
    @apply overflow-hidden;
    /* Clean, minimal background - no gradients */
  }

  /* Minimal scrollbar - Dark theme */
  ::-webkit-scrollbar {
    @apply w-2 h-2;
  }

  ::-webkit-scrollbar-track {
    @apply bg-bg-primary;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-border-primary rounded-full;
    @apply hover:bg-border-secondary;
    @apply transition-colors duration-150;
  }

  /* Selection - Blue accent for dark theme */
  ::selection {
    @apply bg-accent-info/30 text-fg-primary;
  }
}

@layer components {
  /* Glass panel effect - Claude minimal style */
  .glass-panel {
    @apply bg-glass-bg backdrop-blur-lg;
    @apply border border-glass-border rounded-2xl;
    @apply shadow-md;
  }

  /* Card component - Clean and minimal */
  .card {
    @apply bg-bg-secondary border border-border-primary rounded-xl;
    @apply p-5 transition-all duration-150;
    @apply hover:border-border-secondary hover:shadow-sm;
  }

  .card-elevated {
    @apply bg-bg-secondary border border-border-primary rounded-xl;
    @apply p-5 shadow-md;
  }

  /* Button - Primary (Claude style) */
  .btn-primary {
    @apply bg-accent-primary text-white font-medium;
    @apply px-5 py-2.5 rounded-xl;
    @apply transition-all duration-200;
    @apply hover:bg-accent-secondary hover:shadow-md;
    @apply active:scale-[0.98];
    @apply disabled:opacity-40 disabled:cursor-not-allowed disabled:hover:bg-accent-primary disabled:shadow-none;
  }

  /* Button - Secondary */
  .btn-secondary {
    @apply bg-bg-secondary text-fg-primary font-medium;
    @apply px-5 py-2.5 rounded-xl border border-border-primary;
    @apply transition-all duration-200;
    @apply hover:border-border-secondary hover:bg-bg-tertiary hover:shadow-sm;
    @apply active:scale-[0.98];
    @apply disabled:opacity-40 disabled:cursor-not-allowed;
  }

  /* Button - Ghost */
  .btn-ghost {
    @apply bg-transparent text-fg-secondary font-medium;
    @apply px-5 py-2.5 rounded-xl;
    @apply transition-all duration-200;
    @apply hover:bg-bg-tertiary hover:text-fg-primary;
    @apply active:scale-[0.98];
  }

  /* Button - Danger (Material Design red) */
  .btn-danger {
    @apply text-white font-medium;
    @apply px-5 py-2.5 rounded-xl;
    @apply bg-gradient-to-r from-red-500 to-red-600;
    @apply shadow-lg shadow-red-500/25;
    @apply transition-all duration-200;
    @apply hover:from-red-600 hover:to-red-700 hover:shadow-red-500/40;
    @apply active:scale-[0.98];
    @apply disabled:opacity-40 disabled:cursor-not-allowed disabled:shadow-none;
  }

  /* Button - Gradient (Material Design inspired) */
  .btn-gradient {
    @apply text-white font-medium;
    @apply px-5 py-2.5 rounded-xl;
    @apply bg-gradient-to-r from-purple-500 to-violet-600;
    @apply shadow-lg shadow-purple-500/25;
    @apply transition-all duration-200;
    @apply hover:from-purple-600 hover:to-violet-700 hover:shadow-purple-500/40;
    @apply active:scale-[0.98];
    @apply disabled:opacity-40 disabled:cursor-not-allowed disabled:shadow-none;
  }

  /* Icon button - Subtle and minimal */
  .btn-icon {
    @apply bg-transparent text-fg-secondary;
    @apply w-9 h-9 rounded-xl;
    @apply flex items-center justify-center;
    @apply transition-all duration-200;
    @apply hover:bg-bg-tertiary hover:text-accent-primary;
    @apply active:scale-[0.95];
  }

  /* Icon button - Rounded (Material Design FAB-like) */
  .btn-icon-round {
    @apply bg-transparent text-fg-tertiary;
    @apply w-8 h-8 rounded-full;
    @apply flex items-center justify-center;
    @apply transition-all duration-200;
    @apply hover:bg-white/10 hover:text-fg-primary;
    @apply active:scale-[0.95];
  }

  /* Input field - Material Design inspired */
  .input {
    @apply bg-bg-secondary border-2 border-border-primary;
    @apply text-fg-primary px-4 py-2.5 rounded-xl;
    @apply focus:outline-none focus:border-purple-500/50 focus:ring-4 focus:ring-purple-500/10;
    @apply placeholder:text-fg-muted;
    @apply transition-all duration-200;
  }

  .input-primary {
    @apply bg-bg-secondary border-2 border-border-primary;
    @apply text-fg-primary px-4 py-3 rounded-xl;
    @apply focus:outline-none focus:border-purple-500/50 focus:ring-4 focus:ring-purple-500/10;
    @apply placeholder:text-fg-muted;
    @apply transition-all duration-200;
  }

  /* Textarea - Material Design inspired */
  .textarea {
    @apply bg-bg-secondary border-2 border-border-primary;
    @apply text-fg-primary px-4 py-3 rounded-xl;
    @apply focus:outline-none focus:border-purple-500/50 focus:ring-4 focus:ring-purple-500/10;
    @apply placeholder:text-fg-muted;
    @apply resize-none;
    @apply transition-all duration-200;
  }

  /* Selection card - Material Design card selection pattern */
  .selection-card {
    @apply relative p-4 rounded-xl border-2 transition-all duration-200 text-left;
    @apply border-border-primary bg-bg-secondary;
    @apply hover:border-border-secondary hover:bg-bg-tertiary;
  }

  .selection-card-selected {
    @apply border-purple-500/60 bg-purple-500/10 shadow-lg shadow-purple-500/10;
  }

  /* Dialog/Modal - Material Design inspired */
  .dialog-backdrop {
    @apply fixed inset-0 z-50 flex items-center justify-center;
    @apply bg-black/60 backdrop-blur-sm;
  }

  .dialog-panel {
    @apply relative bg-bg-primary rounded-2xl shadow-2xl;
    @apply border border-white/10 overflow-hidden;
    @apply max-w-lg w-full mx-4;
  }

  .dialog-header {
    @apply relative px-6 py-5 border-b border-border-primary;
    @apply bg-gradient-to-r from-purple-500/10 via-violet-500/5 to-transparent;
  }

  .dialog-content {
    @apply px-6 py-6 space-y-6;
  }

  .dialog-footer {
    @apply px-6 py-4 border-t border-border-primary bg-bg-secondary/50;
    @apply flex items-center justify-end gap-3;
  }

  /* Badge - Subtle and refined */
  .badge {
    @apply inline-flex items-center px-3 py-1;
    @apply bg-bg-tertiary border border-border-primary rounded-full;
    @apply text-xs font-medium text-fg-secondary;
  }

  .badge-success {
    @apply bg-accent-success/8 border-accent-success/20 text-accent-success;
  }

  .badge-warning {
    @apply bg-accent-warning/8 border-accent-warning/20 text-accent-warning;
  }

  .badge-error {
    @apply bg-accent-error/8 border-accent-error/20 text-accent-error;
  }

  .badge-info {
    @apply bg-accent-info/8 border-accent-info/20 text-accent-info;
  }

  /* Heading styles */
  .heading-1 {
    @apply text-2xl font-semibold text-fg-primary tracking-tight;
  }

  .heading-2 {
    @apply text-xl font-semibold text-fg-primary tracking-tight;
  }

  .heading-3 {
    @apply text-lg font-semibold text-fg-primary;
  }

  .heading-4 {
    @apply text-base font-semibold text-fg-primary;
  }

  /* Status indicators with smooth animations */
  .status-dot {
    @apply w-2 h-2 rounded-full;
    @apply animate-pulse-smooth;
  }

  .status-active {
    @apply status-dot bg-accent-success;
  }

  .status-pending {
    @apply status-dot bg-accent-warning;
  }

  .status-error {
    @apply status-dot bg-accent-error;
  }

  .status-inactive {
    @apply status-dot bg-fg-muted;
  }

  /* Divider */
  .divider {
    @apply border-t border-border-primary;
  }

  .divider-vertical {
    @apply border-l border-border-primary h-full;
  }

  /* Hover effects - Subtle Claude style */
  .hover-lift {
    @apply transition-all duration-150;
    @apply hover:translate-y-[-1px] hover:shadow-md;
  }

  .hover-glow {
    @apply transition-all duration-200;
    @apply hover:shadow-glow;
  }

  /* Active/Selected state - Minimal accent */
  .active-item {
    @apply bg-bg-tertiary border-l-2 border-l-accent-primary;
    @apply text-fg-primary;
  }

  /* Code block - Clean with warm tones */
  .code-block {
    @apply bg-bg-secondary border border-border-primary;
    @apply p-4 rounded-xl font-mono text-sm overflow-x-auto;
  }

  /* Skeleton loader - Subtle animation */
  .skeleton {
    @apply bg-bg-tertiary rounded-lg animate-pulse;
  }

  /* Toast/notification - Refined appearance */
  .toast {
    @apply glass-panel p-5 min-w-[320px] max-w-md;
    @apply animate-slide-in-from-right;
  }

  /* Tabs - Minimal with warm accents */
  .tab {
    @apply px-5 py-3 text-sm font-medium text-fg-secondary;
    @apply border-b-2 border-transparent;
    @apply transition-all duration-150;
    @apply hover:text-fg-primary hover:border-border-secondary;
  }

  .tab-active {
    @apply tab text-fg-primary border-accent-primary;
  }

  /* Sidebar navigation item - Minimal hover states */
  .nav-item {
    @apply flex items-center gap-3 px-4 py-2.5 rounded-lg;
    @apply text-fg-secondary text-sm font-medium;
    @apply transition-all duration-150;
    @apply hover:bg-bg-tertiary hover:text-fg-primary;
    @apply cursor-pointer;
  }

  .nav-item-active {
    @apply nav-item bg-bg-tertiary text-fg-primary;
    @apply border-l-2 border-l-accent-primary pl-[14px];
  }

  /* Panel header - Clean separation */
  .panel-header {
    @apply flex items-center justify-between px-5 py-4;
    @apply border-b border-border-primary;
    @apply bg-bg-secondary;
  }

  /* Empty state */
  .empty-state {
    @apply flex flex-col items-center justify-center;
    @apply text-center py-12 px-4;
  }

  .empty-state-icon {
    @apply w-16 h-16 mb-4 text-fg-muted;
  }

  .empty-state-title {
    @apply text-lg font-medium text-fg-primary mb-2;
  }

  .empty-state-description {
    @apply text-sm text-fg-secondary max-w-sm;
  }
}

@layer utilities {
  /* Animations */
  .animate-pulse-smooth {
    animation: pulse-smooth 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  .animate-fade-in {
    animation: fade-in 0.3s ease-out;
  }

  .animate-slide-in-from-right {
    animation: slide-in-from-right 0.3s ease-out;
  }

  .animate-slide-in-from-left {
    animation: slide-in-from-left 0.3s ease-out;
  }

  .animate-scale-in {
    animation: scale-in 0.2s ease-out;
  }

  .animate-flow-wave {
    animation: flow-wave 3s ease-in-out infinite;
  }

  .animate-breathe {
    animation: breathe 2s ease-in-out infinite;
  }

  .animate-shimmer {
    animation: shimmer 2s linear infinite;
    background: linear-gradient(90deg,
      transparent 0%,
      rgb(var(--accent-primary) / 0.1) 50%,
      transparent 100%);
    background-size: 200% 100%;
  }

  /* Text utilities */
  .text-gradient {
    @apply bg-gradient-to-r from-accent-primary to-accent-secondary;
    @apply bg-clip-text text-transparent;
  }

  /* Truncate with tooltip */
  .truncate-line-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .truncate-line-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}

/* Keyframe animations */
@keyframes pulse-smooth {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

@keyframes fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slide-in-from-right {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slide-in-from-left {
  from {
    transform: translateX(-100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes scale-in {
  from {
    transform: scale(0.9);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}

/* Anthropic-style flowing wave animation */
@keyframes flow-wave {
  0%, 100% {
    transform: translateX(-10%);
    opacity: 0.2;
  }
  50% {
    transform: translateX(10%);
    opacity: 0.4;
  }
}

/* Gentle breathing animation for agent indicators */
@keyframes breathe {
  0%, 100% {
    transform: scale(1);
    opacity: 0.8;
  }
  50% {
    transform: scale(1.1);
    opacity: 1;
  }
}

/* Shimmer effect for loading states */
@keyframes shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

/* React Flow custom styles - Claude theme */
.react-flow {
  @apply bg-bg-primary;
}

.react-flow__node {
  @apply bg-bg-secondary border border-border-primary rounded-xl;
  @apply font-sans text-sm shadow-sm;
}

.react-flow__node.selected {
  @apply border-accent-primary shadow-md;
}

.react-flow__edge {
  stroke: rgb(var(--accent-primary));
  stroke-width: 2;
}

.react-flow__edge.selected {
  stroke: rgb(var(--accent-secondary));
}

.react-flow__controls {
  @apply bg-bg-secondary border border-border-primary rounded-xl shadow-md;
}

.react-flow__controls button {
  @apply bg-transparent border-none text-fg-secondary;
  @apply hover:bg-bg-tertiary hover:text-accent-primary;
  @apply transition-colors duration-150;
}

/* Monaco Editor custom styles - Light theme */
.monaco-editor {
  @apply font-mono;
}

.monaco-editor .margin {
  @apply bg-bg-secondary;
}

/* xterm.js terminal styles - Warm theme */
.xterm {
  @apply font-mono;
  padding: 0;
}

.xterm-viewport {
  @apply bg-bg-secondary;
}

.xterm .xterm-cursor-layer .xterm-cursor {
  @apply bg-accent-primary;
}

.xterm .xterm-selection {
  background-color: rgba(193, 95, 60, 0.25) !important;
}

/* Syntax highlighting for code blocks (highlight.js) - Dark theme */
.hljs {
  @apply bg-bg-secondary text-fg-primary;
  @apply rounded-xl p-4 overflow-x-auto;
  @apply font-mono text-sm border border-border-primary;
}

/* GitHub-style dark theme syntax highlighting */
.hljs-comment,
.hljs-quote {
  @apply text-fg-tertiary italic;
}

.hljs-keyword,
.hljs-selector-tag,
.hljs-subst {
  @apply text-[#ff7b72]; /* GitHub dark red */
}

.hljs-number,
.hljs-literal,
.hljs-variable,
.hljs-template-variable,
.hljs-tag .hljs-attr {
  @apply text-[#79c0ff]; /* GitHub dark blue */
}

.hljs-string,
.hljs-doctag {
  @apply text-[#a5d6ff]; /* GitHub dark light blue */
}

.hljs-title,
.hljs-section,
.hljs-selector-id {
  @apply text-[#d2a8ff]; /* GitHub dark purple */
}

.hljs-type,
.hljs-class .hljs-title {
  @apply text-[#ffa657]; /* GitHub dark orange */
}

.hljs-tag,
.hljs-name,
.hljs-attribute {
  @apply text-[#7ee787]; /* GitHub dark green */
}

.hljs-regexp,
.hljs-link {
  @apply text-[#a5d6ff];
}

.hljs-symbol,
.hljs-bullet {
  @apply text-[#ffa657];
}

.hljs-built_in,
.hljs-builtin-name {
  @apply text-[#ffa657]; /* GitHub dark orange */
}

.hljs-meta {
  @apply text-fg-tertiary;
}

.hljs-deletion {
  @apply bg-[#8b1c1c]/30 text-[#ff7b72];
}

.hljs-addition {
  @apply bg-[#1b4721]/30 text-[#7ee787];
}

.hljs-emphasis {
  @apply italic;
}

.hljs-strong {
  @apply font-semibold;
}

/* Markdown content styles - Dark theme typography */
.markdown-content {
  @apply text-[#e6edf3] leading-relaxed;
}

.markdown-content h1 {
  @apply text-2xl font-semibold text-[#e6edf3] mt-8 mb-4 pb-3 border-b border-[#30363d];
}

.markdown-content h2 {
  @apply text-xl font-semibold text-[#e6edf3] mt-6 mb-3 pb-2 border-b border-[#30363d];
}

.markdown-content h3 {
  @apply text-lg font-semibold text-[#e6edf3] mt-5 mb-2;
}

.markdown-content h4 {
  @apply text-base font-semibold text-[#e6edf3] mt-4 mb-2;
}

.markdown-content h5,
.markdown-content h6 {
  @apply text-sm font-semibold text-[#c9d1d9] mt-3 mb-1;
}

.markdown-content p {
  @apply my-4 text-[#c9d1d9] leading-relaxed;
}

.markdown-content ul,
.markdown-content ol {
  @apply my-4 ml-6 space-y-2 text-[#c9d1d9];
}

.markdown-content ul {
  @apply list-disc;
}

.markdown-content ol {
  @apply list-decimal;
}

.markdown-content li {
  @apply pl-2;
}

.markdown-content a {
  @apply text-[#58a6ff] hover:text-[#79c0ff] underline decoration-1 underline-offset-2;
  @apply transition-colors duration-150;
}

.markdown-content code {
  @apply bg-[#21262d] text-[#79c0ff] px-2 py-0.5 rounded-md text-sm font-mono;
}

.markdown-content pre {
  @apply my-5 rounded-xl overflow-hidden;
}

.markdown-content pre code {
  @apply bg-transparent text-[#e6edf3] p-0;
}

.markdown-content blockquote {
  @apply border-l-4 border-[#58a6ff]/40 pl-5 py-2 my-5;
  @apply bg-[#58a6ff]/10 text-[#c9d1d9] rounded-r-lg;
}

.markdown-content table {
  @apply w-full my-5 border border-[#30363d] rounded-xl overflow-hidden;
}

.markdown-content thead {
  @apply bg-[#21262d];
}

.markdown-content th {
  @apply px-5 py-3 text-left text-sm font-semibold text-[#e6edf3] border-b border-[#30363d];
}

.markdown-content td {
  @apply px-5 py-3 text-sm text-[#c9d1d9] border-b border-[#30363d];
}

.markdown-content tbody tr:last-child td {
  @apply border-b-0;
}

.markdown-content tbody tr:hover {
  @apply bg-[#21262d]/50;
}

.markdown-content hr {
  @apply my-8 border-t border-[#30363d];
}

.markdown-content img {
  @apply max-w-full h-auto rounded-xl my-5;
}

.markdown-content strong {
  @apply text-[#e6edf3] font-semibold;
}

.markdown-content em {
  @apply text-[#c9d1d9] italic;
}
