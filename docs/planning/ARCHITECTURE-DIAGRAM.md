# LLMOS Architecture Diagrams

## 1. High-Level System Architecture

```
╔═══════════════════════════════════════════════════════════════════════════════╗
║                           LLMOS SYSTEM ARCHITECTURE                            ║
╠═══════════════════════════════════════════════════════════════════════════════╣
║                                                                                ║
║  ┌─────────────────────────────────────────────────────────────────────────┐  ║
║  │                         LLM PROVIDERS (CLOUD)                            │  ║
║  │                                                                          │  ║
║  │   ┌──────────┐    ┌──────────┐    ┌──────────┐    ┌──────────┐        │  ║
║  │   │  Claude  │    │  OpenAI  │    │  Gemini  │    │  Local   │        │  ║
║  │   │          │    │   GPT    │    │  Flash   │    │  (Ollama)│        │  ║
║  │   └────┬─────┘    └────┬─────┘    └────┬─────┘    └────┬─────┘        │  ║
║  │        └───────────────┴───────────────┴───────────────┘              │  ║
║  │                                │                                       │  ║
║  └────────────────────────────────┼───────────────────────────────────────┘  ║
║                                   │ API                                       ║
║  ┌────────────────────────────────▼───────────────────────────────────────┐  ║
║  │                         LLMOS CORE ENGINE                               │  ║
║  │  ┌────────────────────────────────────────────────────────────────┐   │  ║
║  │  │                   AGENT RUNTIME LAYER                           │   │  ║
║  │  │                                                                  │   │  ║
║  │  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────────┐ │   │  ║
║  │  │  │   Agent     │  │   Tool      │  │   Memory & Learning     │ │   │  ║
║  │  │  │   Loop      │  │   Registry  │  │   (Experience Pool)     │ │   │  ║
║  │  │  │  (500ms)    │  │             │  │                         │ │   │  ║
║  │  │  └──────┬──────┘  └──────┬──────┘  └───────────┬─────────────┘ │   │  ║
║  │  │         │                │                     │               │   │  ║
║  │  └─────────┼────────────────┼─────────────────────┼───────────────┘   │  ║
║  │            │                │                     │                    │  ║
║  │  ┌─────────▼────────────────▼─────────────────────▼───────────────┐   │  ║
║  │  │                   COGNITION LAYER                               │   │  ║
║  │  │                                                                  │   │  ║
║  │  │  ┌─────────────┐  ┌─────────────┐  ┌─────────────────────────┐ │   │  ║
║  │  │  │   World     │  │    Ray      │  │      Scene Graph        │ │   │  ║
║  │  │  │   Model     │  │ Navigation  │  │   (Spatial Reasoning)   │ │   │  ║
║  │  │  │  (Grid)     │  │             │  │                         │ │   │  ║
║  │  │  └─────────────┘  └─────────────┘  └─────────────────────────┘ │   │  ║
║  │  │                                                                  │   │  ║
║  │  └──────────────────────────┬─────────────────────────────────────┘   │  ║
║  │                             │                                          │  ║
║  │  ┌──────────────────────────▼─────────────────────────────────────┐   │  ║
║  │  │              HARDWARE ABSTRACTION LAYER                         │   │  ║
║  │  │                                                                  │   │  ║
║  │  │                    DeviceContext Interface                       │   │  ║
║  │  │   ┌──────────────────────────────────────────────────────────┐ │   │  ║
║  │  │   │  setLeftWheel()  setRightWheel()  setLED()              │ │   │  ║
║  │  │   │  getSensors()    captureCamera()   getDeviceId()        │ │   │  ║
║  │  │   └──────────────────────────────────────────────────────────┘ │   │  ║
║  │  │                                                                  │   │  ║
║  │  └────────────────────┬────────────────────┬──────────────────────┘   │  ║
║  │                       │                    │                           │  ║
║  └───────────────────────┼────────────────────┼───────────────────────────┘  ║
║                          │                    │                              ║
║      ┌───────────────────┴──────┐    ┌───────┴────────────────────┐         ║
║      │                          │    │                            │         ║
║      ▼                          ▼    ▼                            ▼         ║
║  ┌──────────────────┐    ┌──────────────────┐    ┌──────────────────┐      ║
║  │   SIMULATION     │    │   PHYSICAL       │    │   DIGITAL TWIN   │      ║
║  │   ENVIRONMENT    │    │   ROBOT          │    │   (Headless)     │      ║
║  │                  │    │                  │    │                  │      ║
║  │ ┌──────────────┐│    │ ┌──────────────┐ │    │ ┌──────────────┐│      ║
║  │ │Physics Engine││    │ │  ESP32-S3    │ │    │ │Physics Engine││      ║
║  │ │(CubeRobotSim)││    │ │  Hardware    │ │    │ │ (No Render)  ││      ║
║  │ └──────────────┘│    │ └──────────────┘ │    │ └──────────────┘│      ║
║  │                  │    │                  │    │                  │      ║
║  │ ┌──────────────┐│    │ ┌──────────────┐ │    │ ┌──────────────┐│      ║
║  │ │ 3D Renderer  ││    │ │   Motors     │ │    │ │    Stats     ││      ║
║  │ │ (Three.js)   ││    │ │   Sensors    │ │    │ │   Metrics    ││      ║
║  │ └──────────────┘│    │ │   Camera     │ │    │ └──────────────┘│      ║
║  │                  │    │ └──────────────┘ │    │                  │      ║
║  └──────────────────┘    └──────────────────┘    └──────────────────┘      ║
║           │                       │                       │                 ║
║           └───────────────────────┴───────────────────────┘                 ║
║                                   │                                          ║
║                    ┌──────────────▼──────────────┐                          ║
║                    │    3D WORLD INTERACTION     │                          ║
║                    │    (Simulated OR Real)      │                          ║
║                    └─────────────────────────────┘                          ║
║                                                                              ║
╚══════════════════════════════════════════════════════════════════════════════╝
```

## 2. Decoupled Package Architecture (Target)

```
╔═══════════════════════════════════════════════════════════════════════════════╗
║                        DECOUPLED PACKAGE STRUCTURE                             ║
╠═══════════════════════════════════════════════════════════════════════════════╣
║                                                                                ║
║    ┌─────────────────────────────────────────────────────────────────────┐    ║
║    │                        @llmos/agent-core                             │    ║
║    │                     (Zero Graphics Dependencies)                     │    ║
║    │  ┌─────────────────────────────────────────────────────────────┐   │    ║
║    │  │  ESP32AgentRuntime   WorldModel   RayNavigation   Tools     │   │    ║
║    │  │  DeviceContext       SceneGraph   SensorFormatters          │   │    ║
║    │  └─────────────────────────────────────────────────────────────┘   │    ║
║    └────────────────────────────────┬────────────────────────────────────┘    ║
║                                     │                                          ║
║                                     │ imports                                  ║
║         ┌───────────────────────────┼───────────────────────────┐             ║
║         │                           │                           │             ║
║         ▼                           ▼                           ▼             ║
║    ┌─────────────┐           ┌─────────────┐           ┌─────────────┐       ║
║    │  @llmos/    │           │  @llmos/    │           │  @llmos/    │       ║
║    │  simulator  │           │  hardware-  │           │visualization│       ║
║    │             │           │  bridge     │           │             │       ║
║    │ ┌─────────┐ │           │ ┌─────────┐ │           │ ┌─────────┐ │       ║
║    │ │CubeRobot│ │           │ │ Serial  │ │           │ │Three.js │ │       ║
║    │ │Simulator│ │           │ │ Driver  │ │           │ │ Canvas  │ │       ║
║    │ └─────────┘ │           │ └─────────┘ │           │ └─────────┘ │       ║
║    │ ┌─────────┐ │           │ ┌─────────┐ │           │ ┌─────────┐ │       ║
║    │ │Headless │ │           │ │ WiFi/   │ │           │ │ Debug   │ │       ║
║    │ │Runner   │ │           │ │WebSocket│ │           │ │Overlays │ │       ║
║    │ └─────────┘ │           │ └─────────┘ │           │ └─────────┘ │       ║
║    │ ┌─────────┐ │           │ ┌─────────┐ │           │ ┌─────────┐ │       ║
║    │ │Scenario │ │           │ │Firmware │ │           │ │ MiniMap │ │       ║
║    │ │Loader   │ │           │ │Protocol │ │           │ │ PiP     │ │       ║
║    │ └─────────┘ │           │ └─────────┘ │           │ └─────────┘ │       ║
║    └─────────────┘           └─────────────┘           └─────────────┘       ║
║          │                         │                         │                ║
║          │ implements              │ implements              │ uses           ║
║          │ DeviceContext           │ DeviceContext           │ state from     ║
║          ▼                         ▼                         ▼                ║
║    ┌─────────────┐           ┌─────────────┐           ┌─────────────┐       ║
║    │  Simulated  │           │  Physical   │           │   Visual    │       ║
║    │   World     │           │   Robot     │           │  Rendering  │       ║
║    └─────────────┘           └─────────────┘           └─────────────┘       ║
║                                                                                ║
╚═══════════════════════════════════════════════════════════════════════════════╝
```

## 3. Live Instance + Digital Twins Data Flow

```
╔═══════════════════════════════════════════════════════════════════════════════╗
║                    LIVE INSTANCE + DIGITAL TWINS SYSTEM                        ║
╠═══════════════════════════════════════════════════════════════════════════════╣
║                                                                                ║
║                         ┌─────────────────────┐                               ║
║                         │   PHYSICAL WORLD    │                               ║
║                         │    (Real 3D)        │                               ║
║                         └──────────┬──────────┘                               ║
║                                    │                                           ║
║                                    ▼                                           ║
║                         ┌─────────────────────┐                               ║
║                         │   LIVE INSTANCE     │                               ║
║                         │   (Physical Robot)  │                               ║
║                         │                     │                               ║
║                         │  ┌───────────────┐  │                               ║
║                         │  │ Agent Runtime │  │                               ║
║                         │  └───────┬───────┘  │                               ║
║                         │          │          │                               ║
║                         │  ┌───────▼───────┐  │                               ║
║                         │  │ Real Sensors  │  │                               ║
║                         │  │ Real Motors   │  │                               ║
║                         │  └───────────────┘  │                               ║
║                         └──────────┬──────────┘                               ║
║                                    │                                           ║
║                      ┌─────────────┴─────────────┐                            ║
║                      │   EXPERIENCE STREAM       │                            ║
║                      │                           │                            ║
║                      │  • Sensor readings        │                            ║
║                      │  • Actions taken          │                            ║
║                      │  • Outcomes observed      │                            ║
║                      │  • Navigation decisions   │                            ║
║                      └─────────────┬─────────────┘                            ║
║                                    │                                           ║
║                                    ▼                                           ║
║                      ┌─────────────────────────────┐                          ║
║                      │      EXPERIENCE POOL        │                          ║
║                      │    (Shared Memory Bank)     │                          ║
║                      │                             │                          ║
║                      │  ┌─────────────────────┐   │                          ║
║                      │  │ Episode Storage     │   │                          ║
║                      │  │ • Trajectories      │   │                          ║
║                      │  │ • Sensor histories  │   │                          ║
║                      │  │ • Success/failure   │   │                          ║
║                      │  └─────────────────────┘   │                          ║
║                      └─────────────┬───────────────┘                          ║
║                                    │                                           ║
║         ┌──────────────────────────┼──────────────────────────┐               ║
║         │                          │                          │               ║
║         ▼                          ▼                          ▼               ║
║    ┌─────────────┐          ┌─────────────┐          ┌─────────────┐         ║
║    │  DREAM      │          │  DREAM      │          │  DREAM      │         ║
║    │  TWIN 1     │          │  TWIN 2     │          │  TWIN N     │         ║
║    │             │          │             │          │             │         ║
║    │ Scenario:   │          │ Scenario:   │          │ Scenario:   │         ║
║    │ Replay with │          │ Edge cases  │          │ Random      │         ║
║    │ variations  │          │ & failures  │          │ exploration │         ║
║    │             │          │             │          │             │         ║
║    │ ┌─────────┐ │          │ ┌─────────┐ │          │ ┌─────────┐ │         ║
║    │ │Headless │ │          │ │Headless │ │          │ │Headless │ │         ║
║    │ │ Physics │ │          │ │ Physics │ │          │ │ Physics │ │         ║
║    │ └─────────┘ │          │ └─────────┘ │          │ └─────────┘ │         ║
║    └──────┬──────┘          └──────┬──────┘          └──────┬──────┘         ║
║           │                        │                        │                 ║
║           │                        │                        │                 ║
║           └────────────────────────┼────────────────────────┘                 ║
║                                    │                                           ║
║                                    ▼                                           ║
║                      ┌─────────────────────────────┐                          ║
║                      │    LEARNING AGGREGATOR      │                          ║
║                      │                             │                          ║
║                      │  • Compare twin outcomes    │                          ║
║                      │  • Identify patterns        │                          ║
║                      │  • Extract strategies       │                          ║
║                      │  • Update navigation rules  │                          ║
║                      └─────────────┬───────────────┘                          ║
║                                    │                                           ║
║                                    ▼                                           ║
║                      ┌─────────────────────────────┐                          ║
║                      │   LIVE INSTANCE UPDATE      │                          ║
║                      │                             │                          ║
║                      │  • Refined agent prompts    │                          ║
║                      │  • Better tool strategies   │                          ║
║                      │  • Optimized navigation     │                          ║
║                      │  • Pre-computed responses   │                          ║
║                      └─────────────────────────────┘                          ║
║                                                                                ║
╚═══════════════════════════════════════════════════════════════════════════════╝
```

## 4. Inversion of Control Detail

```
╔═══════════════════════════════════════════════════════════════════════════════╗
║                        INVERSION OF CONTROL                                    ║
╠═══════════════════════════════════════════════════════════════════════════════╣
║                                                                                ║
║   TRADITIONAL APPROACH                    LLMOS APPROACH                       ║
║   ──────────────────                      ──────────────                       ║
║                                                                                ║
║   ┌─────────────────┐                    ┌──────────────────────────────┐     ║
║   │ MICROCONTROLLER │                    │           CLOUD              │     ║
║   │                 │                    │                              │     ║
║   │  ┌───────────┐  │                    │   ┌────────────────────┐    │     ║
║   │  │ FIRMWARE  │  │                    │   │        LLM         │    │     ║
║   │  │           │  │                    │   │                    │    │     ║
║   │  │ if (dist  │  │                    │   │  "I see obstacle   │    │     ║
║   │  │  < 20) {  │  │                    │   │   20cm ahead.      │    │     ║
║   │  │  turnLeft │  │                    │   │   Based on my      │    │     ║
║   │  │  ();      │  │                    │   │   exploration      │    │     ║
║   │  │ }         │  │                    │   │   goal, I should   │    │     ║
║   │  │           │  │                    │   │   turn right to    │    │     ║
║   │  │ // Fixed  │  │                    │   │   explore new      │    │     ║
║   │  │ // logic  │  │                    │   │   area..."         │    │     ║
║   │  │           │  │                    │   │                    │    │     ║
║   │  └───────────┘  │                    │   └─────────┬──────────┘    │     ║
║   │        │        │                    │             │               │     ║
║   │        ▼        │                    └─────────────┼───────────────┘     ║
║   │  ┌───────────┐  │                                 │                      ║
║   │  │  MOTORS   │  │                                 │ Tool Call:           ║
║   │  │  SENSORS  │  │                                 │ drive(100, 200)      ║
║   │  └───────────┘  │                                 │                      ║
║   │                 │                                 ▼                      ║
║   └─────────────────┘                    ┌──────────────────────────────┐     ║
║                                          │      MICROCONTROLLER         │     ║
║                                          │                              │     ║
║                                          │   ┌────────────────────┐    │     ║
║                                          │   │  MINIMAL FIRMWARE  │    │     ║
║                                          │   │                    │    │     ║
║                                          │   │  // Just executes  │    │     ║
║                                          │   │  // NO decisions   │    │     ║
║                                          │   │                    │    │     ║
║                                          │   │  void drive(l,r) { │    │     ║
║                                          │   │    motorL.set(l);  │    │     ║
║                                          │   │    motorR.set(r);  │    │     ║
║                                          │   │  }                 │    │     ║
║                                          │   └────────────────────┘    │     ║
║                                          │             │               │     ║
║                                          │             ▼               │     ║
║                                          │   ┌────────────────────┐    │     ║
║                                          │   │  MOTORS & SENSORS  │    │     ║
║                                          │   │  (Exposed as tools)│    │     ║
║                                          │   └────────────────────┘    │     ║
║                                          │                              │     ║
║                                          └──────────────────────────────┘     ║
║                                                                                ║
║   CHARACTERISTICS:                        CHARACTERISTICS:                     ║
║   • Fixed behavior                        • Adaptive behavior                  ║
║   • Hard to update                        • Update via prompt change           ║
║   • Limited reasoning                     • Natural language reasoning         ║
║   • Compile, flash, test                  • Edit markdown, deploy              ║
║   • Works offline                         • Requires connectivity              ║
║                                           • Can cache decisions offline        ║
║                                                                                ║
╚═══════════════════════════════════════════════════════════════════════════════╝
```

## 5. Hardware Circuit Diagram

```
╔═══════════════════════════════════════════════════════════════════════════════╗
║                        PHYSICAL ROBOT HARDWARE                                 ║
╠═══════════════════════════════════════════════════════════════════════════════╣
║                                                                                ║
║                              ┌─────────────────────────┐                      ║
║                              │       POWER SUPPLY      │                      ║
║                              │                         │                      ║
║                              │  ┌─────────┐           │                      ║
║                              │  │ 12V Li  │           │                      ║
║                              │  │ Battery │           │                      ║
║                              │  └────┬────┘           │                      ║
║                              │       │                │                      ║
║                              │   ┌───┴────┐          │                      ║
║                              │   │ Step   │──► 5V (Logic)                   ║
║                              │   │ Down   │──► 3.3V (ESP32)                 ║
║                              │   │        │──► 12V (Motors)                 ║
║                              │   └────────┘          │                      ║
║                              └─────────────────────────┘                      ║
║                                        │                                       ║
║                                        ▼                                       ║
║    ┌───────────────────────────────────────────────────────────────────┐     ║
║    │                          ESP32-S3 DevKit                           │     ║
║    │                                                                    │     ║
║    │   ┌──────────────────────────────────────────────────────────┐   │     ║
║    │   │                      GPIO PINOUT                          │   │     ║
║    │   │                                                           │   │     ║
║    │   │  CAMERA (OV2640)           MOTORS (via A4988 drivers)    │   │     ║
║    │   │  ┌─────────────────┐       ┌────────────────────────┐    │   │     ║
║    │   │  │ D0-D7  → DATA   │       │ GPIO12 → STEP_L        │    │   │     ║
║    │   │  │ XCLK   → GPIO0  │       │ GPIO13 → DIR_L         │    │   │     ║
║    │   │  │ PCLK   → GPIO22 │       │ GPIO14 → STEP_R        │    │   │     ║
║    │   │  │ VSYNC  → GPIO25 │       │ GPIO15 → DIR_R         │    │   │     ║
║    │   │  │ HREF   → GPIO23 │       │ GPIO27 → ENABLE        │    │   │     ║
║    │   │  │ SDA    → GPIO26 │       └────────────────────────┘    │   │     ║
║    │   │  │ SCL    → GPIO27 │                                     │   │     ║
║    │   │  └─────────────────┘                                     │   │     ║
║    │   │                                                           │   │     ║
║    │   │  ULTRASONIC (HC-SR04)      RGB LED                       │   │     ║
║    │   │  ┌─────────────────┐       ┌────────────────────────┐    │   │     ║
║    │   │  │ TRIG_F → GPIO16 │       │ GPIO2  → RED   (PWM)   │    │   │     ║
║    │   │  │ ECHO_F → GPIO17 │       │ GPIO4  → GREEN (PWM)   │    │   │     ║
║    │   │  │ TRIG_L → GPIO18 │       │ GPIO5  → BLUE  (PWM)   │    │   │     ║
║    │   │  │ ECHO_L → GPIO19 │       └────────────────────────┘    │   │     ║
║    │   │  │ TRIG_R → GPIO32 │                                     │   │     ║
║    │   │  │ ECHO_R → GPIO33 │       WiFi/BLUETOOTH               │   │     ║
║    │   │  └─────────────────┘       ┌────────────────────────┐    │   │     ║
║    │   │                            │ Built-in Antenna       │    │   │     ║
║    │   │  IR LINE SENSORS           │ 2.4GHz WiFi            │    │   │     ║
║    │   │  ┌─────────────────┐       │ BLE 5.0                │    │   │     ║
║    │   │  │ IR1   → GPIO34  │       └────────────────────────┘    │   │     ║
║    │   │  │ IR2   → GPIO35  │                                     │   │     ║
║    │   │  │ IR3   → GPIO36  │                                     │   │     ║
║    │   │  │ IR4   → GPIO39  │                                     │   │     ║
║    │   │  │ IR5   → GPIO21  │                                     │   │     ║
║    │   │  └─────────────────┘                                     │   │     ║
║    │   │                                                           │   │     ║
║    │   └───────────────────────────────────────────────────────────┘   │     ║
║    │                                                                    │     ║
║    └────────────────────────────────────────────────────────────────────┘     ║
║                                        │                                       ║
║                    ┌───────────────────┼───────────────────┐                  ║
║                    │                   │                   │                  ║
║                    ▼                   ▼                   ▼                  ║
║    ┌───────────────────┐  ┌───────────────────┐  ┌───────────────────┐       ║
║    │   A4988 DRIVER L  │  │   A4988 DRIVER R  │  │  ULTRASONIC x3    │       ║
║    │                   │  │                   │  │                   │       ║
║    │  STEP ← GPIO12    │  │  STEP ← GPIO14    │  │  Front            │       ║
║    │  DIR  ← GPIO13    │  │  DIR  ← GPIO15    │  │  Left             │       ║
║    │  VMOT ← 12V       │  │  VMOT ← 12V       │  │  Right            │       ║
║    │  GND  ← GND       │  │  GND  ← GND       │  │                   │       ║
║    │       │           │  │       │           │  └───────────────────┘       ║
║    │       ▼           │  │       ▼           │                              ║
║    │  ┌─────────┐      │  │  ┌─────────┐      │                              ║
║    │  │ NEMA 17 │      │  │  │ NEMA 17 │      │                              ║
║    │  │ STEPPER │      │  │  │ STEPPER │      │                              ║
║    │  │ (LEFT)  │      │  │  │ (RIGHT) │      │                              ║
║    │  └─────────┘      │  │  └─────────┘      │                              ║
║    └───────────────────┘  └───────────────────┘                              ║
║                                                                                ║
╚═══════════════════════════════════════════════════════════════════════════════╝
```

## 6. Gemini Flash Vision Integration

```
╔═══════════════════════════════════════════════════════════════════════════════╗
║                    GEMINI FLASH VISION INTEGRATION                             ║
╠═══════════════════════════════════════════════════════════════════════════════╣
║                                                                                ║
║    ┌──────────────────────────────────────────────────────────────────────┐  ║
║    │                        VISION PROVIDER INTERFACE                      │  ║
║    │                                                                       │  ║
║    │   interface VisionProvider {                                         │  ║
║    │     analyzeFrame(frame: CameraFrame, prompt: string): VisionResult;  │  ║
║    │     streamAnalysis(stream: VideoStream): AsyncIterator<VisionResult>;│  ║
║    │   }                                                                  │  ║
║    │                                                                       │  ║
║    └────────────────────────────────┬─────────────────────────────────────┘  ║
║                                     │                                         ║
║            ┌────────────────────────┼────────────────────────┐               ║
║            │                        │                        │               ║
║            ▼                        ▼                        ▼               ║
║    ┌──────────────┐         ┌──────────────┐         ┌──────────────┐       ║
║    │   GEMINI     │         │    CLAUDE    │         │    LOCAL     │       ║
║    │   FLASH      │         │   VISION     │         │   (Ollama)   │       ║
║    │              │         │              │         │              │       ║
║    │ ⚡ Fast      │         │ 🧠 Deep      │         │ 🔒 Private   │       ║
║    │ 💰 Cheap     │         │    reasoning │         │ 📴 Offline   │       ║
║    │ 📹 Streaming │         │              │         │              │       ║
║    └──────┬───────┘         └──────┬───────┘         └──────┬───────┘       ║
║           │                        │                        │                ║
║           └────────────────────────┼────────────────────────┘                ║
║                                    │                                          ║
║                                    ▼                                          ║
║    ┌──────────────────────────────────────────────────────────────────────┐  ║
║    │                        USE CASE SELECTION                             │  ║
║    │                                                                       │  ║
║    │   ┌─────────────────────────────────────────────────────────────┐   │  ║
║    │   │  Real-time navigation   →  Gemini Flash (speed priority)    │   │  ║
║    │   │  Complex scene analysis →  Claude (reasoning priority)       │   │  ║
║    │   │  Offline operation      →  Local model (privacy priority)   │   │  ║
║    │   │  Object tracking        →  Gemini Live API (streaming)      │   │  ║
║    │   └─────────────────────────────────────────────────────────────┘   │  ║
║    │                                                                       │  ║
║    └──────────────────────────────────────────────────────────────────────┘  ║
║                                                                                ║
║    ┌──────────────────────────────────────────────────────────────────────┐  ║
║    │                     GEMINI APPLET INTEGRATION                         │  ║
║    │                                                                       │  ║
║    │   Camera Frame                      Interactive Overlay               │  ║
║    │   ┌─────────────────┐              ┌─────────────────┐               │  ║
║    │   │     ┌───┐       │     ────►    │     ┌───┐       │               │  ║
║    │   │     │ □ │←robot │   Gemini     │     │ □ │←robot │               │  ║
║    │   │     └───┘       │   Applet     │     └─┬─┘       │               │  ║
║    │   │ ┌──┐     ┌──┐   │   Generator  │ ┌──┐  │  ┌──┐   │               │  ║
║    │   │ │▓▓│     │▓▓│   │              │ │▓▓│  │  │▓▓│   │               │  ║
║    │   │ └──┘     └──┘   │              │ └──┘  ▼  └──┘   │               │  ║
║    │   │   obstacles     │              │      ···       │               │  ║
║    │   └─────────────────┘              │   path overlay │               │  ║
║    │                                     └─────────────────┘               │  ║
║    │                                                                       │  ║
║    │   Generated visualizations:                                          │  ║
║    │   • Obstacle bounding boxes                                          │  ║
║    │   • Predicted path trajectory                                        │  ║
║    │   • Object labels and distances                                      │  ║
║    │   • Safety zone indicators                                           │  ║
║    │                                                                       │  ║
║    └──────────────────────────────────────────────────────────────────────┘  ║
║                                                                                ║
╚═══════════════════════════════════════════════════════════════════════════════╝
```

---

## Summary

These diagrams illustrate:

1. **Current Architecture** - Already well-separated with physics independent of graphics
2. **Target Package Structure** - Clean decoupling into reusable packages
3. **Digital Twin System** - Parallel learning through simulation
4. **Inversion of Control** - Cloud intelligence + hardware tools
5. **Hardware Design** - ESP32-S3 based physical robot
6. **Vision Integration** - Multi-provider vision with Gemini Flash
